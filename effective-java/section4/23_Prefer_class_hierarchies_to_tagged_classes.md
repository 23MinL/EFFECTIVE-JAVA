# 23. 태그 달린 클래스보다는 클래스 계층구조를 활용하라


## 📝 전체 내용 간단 요약

프로그래밍을 하다 보면 서로 다른 종류의 데이터를 하나의 클래스 안에서 관리하려는 경우가 생기는데, 흔히 이를 해결하기 위해 데이터 종류를 나타내는 태그(tag)를 사용. 그러나 이런 태그 방식보다는, 각 데이터 종류에 따라 **별도의 클래스를 만들고 이를 상속 구조로 연결하여 관리하는 것이 더 좋습니다**.

클래스 계층구조는 각 객체의 책임과 역할을 명확히 하고, 코드를 더 간결하고 명확하게 유지할 수 있도록 도움. 이를 통해 프로그램의 확장성, 가독성, 유지보수성, 타입 안전성을 높일 수 있습니다.

---

## 📚 미리 알아야 할 내용 요약

### 🔑 클래스(Class)

- 클래스는 특정 종류의 객체를 만들기 위한 **설계도**
- 객체가 가져야 하는 공통된 속성(데이터)과 행동(메서드)을 정의합니다.

> **예:** 강아지 클래스는 강아지의 이름, 품종 같은 속성과 짖다, 뛰다 같은 행동을 정의

### 🔑 객체(Object)

- 클래스(설계도)를 바탕으로 실제로 만들어진 개별적인 존재
- 같은 클래스를 기반으로 하더라도 각각의 객체는 서로 다른 상태를 가질 수 있습니다.

> **예:** 흰색 푸들, 검은색 래브라도 등은 모두 강아지 클래스에서 만들어진 서로 다른 객체

### 🔑 상속(Inheritance)

- 하나의 클래스가 다른 클래스의 특성을 물려받아 사용하는 개념
- 상속을 통해 부모 클래스의 속성과 기능을 자식 클래스가 재사용할 수 있고, 추가로 자신만의 기능을 덧붙일 수 있음.

> **예:** `동물` 클래스가 `움직이다`라는 기능을 가지고 있다면, 이를 상속받은 `강아지`나 `고양이` 클래스는 이를 그대로 사용할 수 있음.

---

## 🚩 주의사항

- **너무 깊은 상속을 피하세요**
  - 상속이 너무 깊어지면 클래스 간의 관계가 복잡해져 관리가 어렵습니다. 적당한 수준을 유지해야 합니다.

- **상속은 "is-a" 관계일 때만 사용하세요**
  - A가 B의 일종(is-a)일 때만 상속을 써야 합니다.
  - "가지고 있다"(has-a) 관계라면 클래스 내부에 다른 클래스를 포함시키는 구성(composition) 방식을 사용

- **하나의 클래스가 하나의 책임만 가지도록 설계하세요**
  - 각 클래스는 명확한 하나의 역할만 담당해야 합니다. 이것을 단일 책임 원칙(Single Responsibility Principle)

---

## ⭐ 중요한 점

- **코드의 가독성 향상**
  - 클래스 계층구조를 사용하면 각 객체의 종류별로 코드를 명확하게 나눌 수 있어 읽기 쉬움.

- **유지보수 용이성 증가**
  - 새로운 종류의 객체를 추가하거나 수정하기 쉬움.

- **확장성 증가**
  - 새로운 객체 타입을 추가하는 것이 매우 간단해지고, 기존 코드를 수정하지 않고도 확장 가능.

- **타입 안전성 향상**
  - 컴파일 단계에서 객체의 타입을 검사할 수 있어 런타임에 발생할 수 있는 오류를 미리 방지할 수 있음.

---

## ❌ 잘못된 예제 (태그 방식)

```java
// 태그 달린 클래스 예제 (나쁜 예시)
class Figure {
    enum Shape { RECTANGLE, CIRCLE };

    final Shape shape;
    double length;
    double width;
    double radius;

    Figure(double radius) {
        shape = Shape.CIRCLE;
        this.radius = radius;
    }

    Figure(double length, double width) {
        shape = Shape.RECTANGLE;
        this.length = length;
        this.width = width;
    }

    double area() {
        switch (shape) {
            case RECTANGLE:
                return length * width;
            case CIRCLE:
                return Math.PI * radius * radius;
            default:
                throw new AssertionError("알 수 없는 도형: " + shape);
        }
    }
}
```

### 🔻 문제점:
- **코드가 길고 복잡** (불필요한 필드가 존재)
- **확장하기 어려움** (새로운 도형 추가 시 모든 switch 문을 수정해야 함)
- **메모리 낭비** (모든 객체가 불필요한 필드까지 저장)
- **낮은 가독성** (모든 코드가 하나의 클래스에 혼합)

---

## ✅ 좋은 예제 (클래스 계층구조)

```java
// 좋은 예시: 클래스 계층구조로 도형 관리
abstract class Figure {
    abstract double area();
}

class Circle extends Figure {
    final double radius;

    public Circle(double radius) {
        this.radius = radius;
    }

    @Override
    double area() {
        return Math.PI * radius * radius;
    }
}

class Rectangle extends Figure {
    final double length;
    final double width;

    public Rectangle(double length, double width) {
        this.length = length;
        this.width = width;
    }

    @Override
    double area() {
        return length * width;
    }
}

class Square extends Rectangle {
    public Square(double side) {
        super(side, side);
    }
}
```

### 💡 장점:
- **높은 가독성** (각 클래스의 역할과 책임이 명확)
- **쉬운 유지보수와 확장성** (새로운 도형 추가가 매우 간편)
- **타입 안전성 보장** (각 도형별로 독립된 타입을 가지므로 오류 방지)

---

## 🤔 어려운 점

- **추상 클래스와 추상 메서드 이해**
  - 초보자에게 추상 클래스와 추상 메서드는 다소 어려울 수 있지만, "추상 클래스는 자식 클래스가 반드시 구현해야 하는 기능을 명시하는 틀이다" 라고 이해하면 쉽습니다.

- **상속("is-a" 관계)의 판단**
  - "언제 상속을 사용해야 하는지" 헷갈릴 수 있는데, "이것이 저것의 일종인가?"라는 질문을 스스로에게 던져 보는 것이 좋습니다.

- **새 클래스 추가 판단**
  - 어떤 상황에 새로운 클래스를 추가해야 하는지 고민이 될 때가 많습니다. 일반적으로 객체의 특성이나 행동이 기존 클래스와 명확히 다르다면 추가를 고려합니다.

---

## 🗣️ 느낀 점

- 처음엔 하나의 클래스에 모든 타입을 넣고 태그로 구분하는 방식이 쉬워 보였지만, 코드가 복잡해질수록 오히려 코드 관리가 어렵다는 점.
- 클래스 계층구조를 활용하면 코드가 더 명확하고 확장하기 쉬워진다는 것을 배웠고, 특히 객체지향 원칙인 '단일 책임 원칙'과 '개방-폐쇄 원칙'을 자연스럽게 지킬 수 있어 좋았습니다.
- 앞으로는 새로운 기능을 추가하거나 객체 타입을 다룰 때 태그 방식보다는 계층구조를 적극 활용하여 코드의 품질을 높여야겠다고 생각하게 되었습니다.

---

## 🎯 핵심 한 줄 정리 (Nutshell)

> 🔑 **서로 다른 종류의 데이터를 관리할 때는 태그를 사용하지 말고, 클래스 계층구조를 활용하여 가독성, 유지보수성, 확장성을 높이자!**